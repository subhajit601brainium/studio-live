const async = require('async');
const musicModel = require('../models/music');

var cmsService = {
    getAllCategory: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.getAllCategory(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    userPost: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.userPost(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    updatePost: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.updatePost(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    myPost: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.myPost(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    home: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.home(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    deletePost: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.deletePost(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    musicLikeUnlike: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.musicLikeUnlike(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
    musicFavouriteUnfavourite: (data, callBack) => {
        async.waterfall([
            function(nextCb) {
                musicModel.musicFavouriteUnfavourite(data, function(result) {
                    nextCb(null, result);
                });
            }
        ], function(err, result) {
            if (err) {
                callBack({
                    success: false,
                    STATUSCODE: 403,
                    message: 'Request Forbidden',
                    response_data: {}
                })
            } else {
                callBack(result);
            }
        });
    },
}

module.exports = cmsService;